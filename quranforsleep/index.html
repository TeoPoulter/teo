<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Qur'an Sleep Radio</title>
<style>
/* Full-screen wipe overlay with dark, rich, golden-silver gradient and opacity */
#goldenWipe {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        120deg,
        rgba(139, 117, 0, 0.95),
        rgba(169, 142, 25, 0.95),
        rgba(200, 168, 55, 0.95),
        rgba(139, 117, 0, 0.95)
    );
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    animation: smoothWipeWithPause 4s ease-in-out forwards, darkGoldenShimmer 4s ease-in-out infinite;
    background-size: 400% 400%;
    box-shadow: 0 0 50px rgba(255, 215, 155, 0.5);
}

/* Slowed-down, luxurious wipe animation */
@keyframes smoothWipeWithPause {
    0% {
        transform: translateX(-100%);
    }
    50% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(100%);
    }
}

/* Shimmer effect for a rich, metallic gradient shift */
@keyframes darkGoldenShimmer {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Logo styling for dark luxurious animation */
#wipeLogo {
    width: 450px;
    height: auto;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
}

/* Page content fade-in */
#pageContent {
    opacity: 0;
    transition: opacity 2s ease-in-out;
}

/* Temporarily hide scrollbars during animation */
body.no-scroll {
    overflow: hidden;
}

/* Import Poppins font */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

/* Reset default margins and paddings */
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #000;
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
}

/* Background container */
.background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, #000000, #000000 50%, #b49f5e 100%);
}

/* Rotating geometric pattern */
.pattern {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: url('https://i.imgur.com/rxD6yFb.png');
    background-size: 100px 100px;
    opacity: 0.05;
    animation: rotate 60s linear infinite;
}

/* Rotation animation */
@keyframes rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Corner images */
.corner {
    position: absolute;
    background-size: contain;
    background-repeat: no-repeat;
    width: 20vw;
    height: 20vw;
    max-width: 250px;
    max-height: 250px;
    z-index: 2;
    filter: grayscale(1) brightness(0.2);
}

/* Specific positions */
.top-left {
    top: 0;
    left: 0;
    background-image: url('https://i.imgur.com/8Fx9W9u.png');
}

.top-right {
    top: 0;
    right: 0;
    background-image: url('https://i.imgur.com/kBZivxG.png');
}

.bottom-left {
    bottom: 0;
    left: 0;
    background-image: url('https://i.imgur.com/V1z0fyO.png');
}

.bottom-right {
    bottom: 0;
    right: 0;
    background-image: url('https://i.imgur.com/YuU3nYm.png');
}

/* Responsive adjustments */
@media (max-width: 600px) {
    .corner {
        width: 35vw;
        height: 35vw;
    }
}

/* Radio Player Interface */
#radio {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 3;
}

/* Sleep Timer Button */
.sleep-timer-container {
    text-align: center;
    margin-bottom: 20px;
}

#sleepTimerButton {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    position: relative;
}

#sleepTimerButton img {
    width: 400px;
    height: 80px;
    border-radius: 20px;
}

/* Main Controls */
.main-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
}

.control-button,
.play-button {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    margin: 0 10px;
    position: relative;
    transition: transform 0.2s;
}

.control-button img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
}

.play-button img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
}

.control-button:active,
.play-button:active,
#sleepTimerButton:active,
#helpButton:active {
    transform: scale(0.95);
}

/* Help Button */
.help-button-container {
    text-align: center;
    margin-top: 20px;
}

#helpButton {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    position: relative;
}

#helpButton img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
}

/* Tooltip */
.tooltip {
    position: absolute;
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(180, 159, 94, 0.9);
    color: #fff;
    padding: 8px;
    border-radius: 10px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
    z-index: 4;
    font-size: 14px;
    text-align: center;
}

.control-button:hover .tooltip,
.play-button:hover .tooltip,
#sleepTimerButton:hover .tooltip,
#helpButton:hover .tooltip {
    opacity: 1;
}

/* Shuffle Button Animation */
@keyframes rotateButton {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Audio Player Styles */
#audioPlayer {
    display: none;
}

/* Custom progress bar */
.progress-bar {
    width: 80%;
    max-width: 600px;
    height: 10px;
    background-color: #333;
    border-radius: 5px;
    margin: 20px auto 0;
    overflow: hidden;
    cursor: pointer;
    position: relative;
}

/* Progress fill */
.progress {
    width: 0%;
    height: 100%;
    background-color: #b49f5e;
}

/* Modal Overlay */
.modal-overlay, .filter-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 10;
    display: none;
    align-items: center;
    justify-content: center;
}

/* Modal Content */
.modal-content, .filter-modal-content {
    background-color: #1a1a1a;
    color: #fff;
    padding: 20px;
    border-radius: 15px;
    max-width: 90%;
    max-height: 80%;
    overflow-y: auto;
    position: relative;
}

/* Close Button */
.close-button {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 30px;
    color: #fff;
    cursor: pointer;
}

/* Button Descriptions in Modal */
.modal-content img, .filter-modal-content img {
    width: 50px;
    height: 50px;
    vertical-align: middle;
    margin-right: 10px;
}

.modal-content h2, .filter-modal-content h2 {
    font-size: 24px;
    margin-top: 0;
    text-align: center;
}

.modal-content p, .filter-modal-content p {
    font-size: 18px;
    line-height: 1.5;
}

/* Scrollbar Styling */
.modal-content::-webkit-scrollbar, .filter-modal-content::-webkit-scrollbar {
    width: 8px;
}

.modal-content::-webkit-scrollbar-thumb, .filter-modal-content::-webkit-scrollbar-thumb {
    background-color: #b49f5e;
    border-radius: 5px;
}

/* Surah Info Styles */
#surahInfoContainer {
    display: none;
    text-align: center;
    margin-top: 20px;
}

.surah-info {
    margin-top: 10px;
    color: #fff;
    font-size: 20px;
    text-align: center;
}

.surah-info .surah-name {
    font-weight: bold;
}

.surah-info .reciter-name {
    font-style: italic;
}

.download-button {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    margin-top: 10px;
}

.download-button img {
    width: 50px;
    height: 50px;
}

/* Juz List Styles */
.juz-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 20px;
}

.juz-item {
    background-color: #333;
    color: #fff;
    padding: 15px;
    margin: 10px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.2s;
    width: 80px;
    text-align: center;
}

.juz-item:hover {
    background-color: #b49f5e;
}

.juz-item.selected {
    background-color: #b49f5e;
}

/* Reset Filter Button */
.reset-filter-button {
    background-color: #b49f5e;
    color: #fff;
    padding: 10px 20px;
    margin: 20px auto 0;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 18px;
    display: block;
}

.reset-filter-button:hover {
    background-color: #a18f57;
}
</style>
</head>

<body>    

<!-- Wipe animation overlay -->
<div id="goldenWipe">
    <img src="https://i.imgur.com/QwjOZSH.png" alt="Logo" id="wipeLogo">
</div>

<!-- Background layers -->
<div class="background">
    <div class="pattern"></div>

    <!-- Corner Patterns -->
    <div class="corner top-left"></div>
    <div class="corner top-right"></div>
    <div class="corner bottom-left"></div>
    <div class="corner bottom-right"></div>
</div>

<!-- Radio Player Interface -->
<div id="radio">
    <!-- Sleep Timer Button -->
    <div class="sleep-timer-container">
        <button id="sleepTimerButton" aria-label="Sleep Timer">
            <img src="https://i.imgur.com/6jVJpH5.png" alt="Sleep Timer">
            <div class="tooltip">Sleep Timer</div>
        </button>
    </div>

    <!-- Main Controls -->
    <div class="main-controls">
        <!-- Volume Control Button -->
        <button id="volumeButton" class="control-button" aria-label="Volume Control">
            <img src="https://i.imgur.com/YHeXLfV.png" alt="Volume 100%">
            <div class="tooltip">Volume Control</div>
        </button>
        <!-- Speed Control Button -->
        <button id="speedButton" class="control-button" aria-label="Speed Control">
            <img src="https://i.imgur.com/wDDwzEi.png" alt="Speed 1x">
            <div class="tooltip">Speed Control</div>
        </button>
        <!-- Play/Pause Button -->
        <button id="playPauseButton" class="play-button" aria-label="Play/Pause">
            <img src="https://i.imgur.com/rfSFOWK.png" alt="Play Button">
            <div class="tooltip">Play/Pause</div>
        </button>
        <!-- Filter Button -->
        <button id="filterButton" class="control-button" aria-label="Filter">
            <img src="https://i.imgur.com/0xVbbOJ.png" alt="Filter Button">
            <div class="tooltip">Filter</div>
        </button>
        <!-- Shuffle Button -->
        <button id="shuffleButton" class="control-button" aria-label="Shuffle">
            <img src="https://i.imgur.com/4K1dnEH.png" alt="Shuffle Button">
            <div class="tooltip">Shuffle</div>
        </button>
    </div>

    <!-- Help Button -->
    <div class="help-button-container">
        <button id="helpButton" aria-label="Help">
            <img src="https://i.imgur.com/i9FtS2l.png" alt="Help Button">
            <div class="tooltip">Help</div>
        </button>
    </div>

    <!-- Hidden audio player -->
    <audio id="audioPlayer"></audio>
    <!-- Custom progress bar -->
    <div class="progress-bar">
        <div class="progress" id="progress"></div>
    </div>

    <!-- Surah Info -->
    <div id="surahInfoContainer" class="surah-info">
        <div class="surah-name" id="surahName">Surah Name</div>
        <div class="reciter-name" id="reciterName">Reciter Name</div>
        <button id="downloadButton" class="download-button" aria-label="Download">
            <img src="https://i.imgur.com/V1Hw6TW.png" alt="Download Button">
        </button>
    </div>
</div>

<!-- Modal Overlay -->
<div class="modal-overlay" id="modalOverlay">
    <div class="modal-content">
        <button class="close-button" id="closeButton">&times;</button>
        <h2>Qur'an Sleep Radio</h2>
        <h2>‏اَلسَلامُ عَلَيْكُمْ وَرَحْمَةُ اَللهِ وَبَرَكاتُهُ</h2>
        <p>This page serves as an archive of my favourite recitations from around the world, all in one place.</p>
        <p>You can control the playback using the buttons below.</p>
        <h3>Controls:</h3>
        <p>
            <img src="https://i.imgur.com/rfSFOWK.png" alt="Play/Pause Button"> <strong>Play/Pause:</strong> Start or pause the recitation.
        </p>
        <p>
            <img src="https://i.imgur.com/YHeXLfV.png" alt="Volume Control Button"> <strong>Volume Control:</strong> Adjust the volume level.
        </p>
        <p>
            <img src="https://i.imgur.com/wDDwzEi.png" alt="Speed Control Button"> <strong>Speed Control:</strong> Adjust the playback speed.
        </p>
        <p>
            <img src="https://i.imgur.com/0xVbbOJ.png" alt="Filter Button"> <strong>Filter:</strong> Filter recitations by Juz.
        </p>
        <p>
            <img src="https://i.imgur.com/4K1dnEH.png" alt="Shuffle Button"> <strong>Shuffle:</strong> Play a random Surah.
        </p>
        <p>
            <img src="https://i.imgur.com/KbIweaS.png" alt="Sleep Timer Button"> <strong>Sleep Timer:</strong> Set how long to play for, and relax to the Word of Allah.
        </p>
    </div>
</div>

<!-- Filter Modal Overlay -->
<div class="modal-overlay" id="filterModalOverlay">
    <div class="modal-content" id="filterModalContent">
        <button class="close-button" id="filterCloseButton">&times;</button>
        <h2>Filter by Juz</h2>
        <div class="juz-list" id="juzList">
            <!-- Juz items will be dynamically added here -->
        </div>
        <button class="reset-filter-button" id="resetFilterButton">Reset Filter</button>
    </div>
</div>

<script>
// Ensure Surah information is hidden on page load
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById('surahInfoContainer').style.display = 'none';
    document.body.classList.add('no-scroll');
    setTimeout(function () {
        document.getElementById('goldenWipe').style.display = 'none';
        document.body.classList.remove('no-scroll');
    }, 4000);
});

const audioPlayer = document.getElementById('audioPlayer');
const playPauseButton = document.getElementById('playPauseButton');
const shuffleButton = document.getElementById('shuffleButton');
const speedButton = document.getElementById('speedButton');
const volumeButton = document.getElementById('volumeButton');
const sleepTimerButton = document.getElementById('sleepTimerButton');
const helpButton = document.getElementById('helpButton');
const filterButton = document.getElementById('filterButton');
const progressBar = document.querySelector('.progress-bar');
const progress = document.getElementById('progress');
const modalOverlay = document.getElementById('modalOverlay');
const closeButton = document.getElementById('closeButton');
const filterModalOverlay = document.getElementById('filterModalOverlay');
const filterCloseButton = document.getElementById('filterCloseButton');
const surahNameDisplay = document.getElementById('surahName');
const reciterNameDisplay = document.getElementById('reciterName');
const downloadButton = document.getElementById('downloadButton');
const juzList = document.getElementById('juzList');
const resetFilterButton = document.getElementById('resetFilterButton');

// AUDIO
const surahs = {
    'surah_001': {
        name: 'Al-Fatihah',
        recitations: [
            {
                reciter: 'Mishary Rashid Alafasy',
                files: ['assets/001.mp3']
            }
        ],
        juz: [1]
    }
};

// Variables for Surah info and download button
const surahInfoContainer = document.getElementById('surahInfoContainer');

let currentSurahKey = null;
let currentSurah = null;
let currentRecitation = null;
let currentPart = 0;
let isPlaying = false;

// Sleep Timer settings
const sleepTimes = [
    { time: null, img: 'https://i.imgur.com/6jVJpH5.png', alt: 'Sleep Timer' },
    { time: 10 * 60, img: 'https://i.imgur.com/2i3xjzP.png', alt: 'Sleep Timer: 10 Minutes' },
    { time: 15 * 60, img: 'https://i.imgur.com/8C92a9F.png', alt: 'Sleep Timer: 15 Minutes' },
    { time: 20 * 60, img: 'https://i.imgur.com/ZkhlFd4.png', alt: 'Sleep Timer: 20 Minutes' },
    { time: 30 * 60, img: 'https://i.imgur.com/dlYk6kr.png', alt: 'Sleep Timer: 30 Minutes' },
    { time: 60 * 60, img: 'https://i.imgur.com/T8qc0tX.png', alt: 'Sleep Timer: 1 Hour' },
    { time: 120 * 60, img: 'https://i.imgur.com/mj64RF8.png', alt: 'Sleep Timer: 2 Hours' }
];
let currentSleepIndex = 0;
let sleepTimerTimeout = null;

// Speed settings
const speeds = [
    { rate: 1.0, img: 'https://i.imgur.com/wDDwzEi.png', alt: 'Speed 1x' },
    { rate: 1.25, img: 'https://i.imgur.com/56ibCLP.png', alt: 'Speed 1.25x' },
    { rate: 1.5, img: 'https://i.imgur.com/QrgfxD1.png', alt: 'Speed 1.5x' },
    { rate: 1.75, img: 'https://i.imgur.com/AJUMmXp.png', alt: 'Speed 1.75x' },
    { rate: 2.0, img: 'https://i.imgur.com/PzKnwfo.png', alt: 'Speed 2x' },
    { rate: 0.5, img: 'https://i.imgur.com/rQqbvso.png', alt: 'Speed 0.5x' },
    { rate: 0.75, img: 'https://i.imgur.com/JymFl6p.png', alt: 'Speed 0.75x' }
];
let currentSpeedIndex = 0;

// Volume settings
const volumes = [
    { level: 1.0, img: 'https://i.imgur.com/YHeXLfV.png', alt: 'Volume 100%' },
    { level: 0.33, img: 'https://i.imgur.com/7tPoTem.png', alt: 'Volume 33%' },
    { level: 0.67, img: 'https://i.imgur.com/3eYgm5a.png', alt: 'Volume 67%' }
];
let currentVolumeIndex = 0;

// Filter settings
let selectedJuz = null;

audioPlayer.volume = volumes[currentVolumeIndex].level;
audioPlayer.playbackRate = speeds[currentSpeedIndex].rate;

function playSurah(surahKey) {
    currentSurahKey = surahKey;
    currentSurah = surahs[surahKey];
    const recitations = currentSurah.recitations || [{ reciter: currentSurah.reciter, files: currentSurah.files }];
    currentRecitation = recitations[Math.floor(Math.random() * recitations.length)];
    currentPart = 0;
    updateSurahInfo();
    playCurrentPart();
}

function playCurrentPart() {
    if (currentPart < currentRecitation.files.length) {
        audioPlayer.src = currentRecitation.files[currentPart];
        audioPlayer.playbackRate = speeds[currentSpeedIndex].rate;
        audioPlayer.volume = volumes[currentVolumeIndex].level;
        audioPlayer.play();
        isPlaying = true;
        updatePlayPauseIcon();
        updateMediaSession();
    }
}

audioPlayer.addEventListener('ended', () => {
    currentPart++;
    if (currentPart < currentRecitation.files.length) {
        playCurrentPart();
    } else {
        if (isPlaying) {
            playRandomSurah();
        }
    }
});

playPauseButton.addEventListener('click', () => {
    if (!isPlaying) {
        if (!currentSurah) {
            playRandomSurah();
        } else {
            audioPlayer.play();
            isPlaying = true;
            updatePlayPauseIcon();
            updateMediaSession();
        }
        startSleepTimer();
    } else {
        audioPlayer.pause();
        isPlaying = false;
        updatePlayPauseIcon();
        clearSleepTimer();
    }
});

shuffleButton.addEventListener('click', () => {
    shuffleButton.style.animation = 'rotateButton 0.5s';
    shuffleButton.addEventListener('animationend', () => {
        shuffleButton.style.animation = '';
    });
    playRandomSurah();
    isPlaying = true;
    updatePlayPauseIcon();
    startSleepTimer();
});

function playRandomSurah() {
    let keys = Object.keys(surahs);
    if (selectedJuz) {
        keys = keys.filter(key => surahs[key].juz.includes(selectedJuz));
    }
    if (keys.length > 0) {
        const randomSurahKey = keys[Math.floor(Math.random() * keys.length)];
        playSurah(randomSurahKey);
    } else {
        alert('No Surahs available for the selected Juz.');
    }
}

speedButton.addEventListener('click', () => {
    currentSpeedIndex = (currentSpeedIndex + 1) % speeds.length;
    audioPlayer.playbackRate = speeds[currentSpeedIndex].rate;
    const speedIcon = speedButton.querySelector('img');
    speedIcon.src = speeds[currentSpeedIndex].img;
    speedIcon.alt = speeds[currentSpeedIndex].alt;
});

volumeButton.addEventListener('click', () => {
    currentVolumeIndex = (currentVolumeIndex + 1) % volumes.length;
    audioPlayer.volume = volumes[currentVolumeIndex].level;
    const volumeIcon = volumeButton.querySelector('img');
    volumeIcon.src = volumes[currentVolumeIndex].img;
    volumeIcon.alt = volumes[currentVolumeIndex].alt;
});

sleepTimerButton.addEventListener('click', () => {
    currentSleepIndex = (currentSleepIndex + 1) % sleepTimes.length;
    const sleepIcon = sleepTimerButton.querySelector('img');
    sleepIcon.src = sleepTimes[currentSleepIndex].img;
    sleepIcon.alt = sleepTimes[currentSleepIndex].alt;
    if (isPlaying) {
        startSleepTimer();
    }
});

function startSleepTimer() {
    clearSleepTimer();
    const sleepTime = sleepTimes[currentSleepIndex].time;
    if (sleepTime !== null) {
        const fadeOutTime = 10;
        const stopTime = sleepTime - fadeOutTime;

        sleepTimerTimeout = setTimeout(() => {
            let fadeInterval = setInterval(() => {
                if (audioPlayer.volume > 0.01) {
                    audioPlayer.volume -= 0.01;
                } else {
                    clearInterval(fadeInterval);
                    audioPlayer.pause();
                    isPlaying = false;
                    updatePlayPauseIcon();
                    audioPlayer.volume = volumes[currentVolumeIndex].level;
                }
            }, 1000 * fadeOutTime / 100);
        }, 1000 * stopTime);
    }
}

function clearSleepTimer() {
    if (sleepTimerTimeout) {
        clearTimeout(sleepTimerTimeout);
        sleepTimerTimeout = null;
    }
}

function updateSurahInfo() {
    surahNameDisplay.textContent = currentSurah.name;
    reciterNameDisplay.textContent = currentRecitation.reciter;
    surahInfoContainer.style.display = 'block'; // Ensure the container is shown
}

function updatePlayPauseIcon() {
    const icon = playPauseButton.querySelector('img');
    icon.src = isPlaying ? 'https://i.imgur.com/iAyh3qN.png' : 'https://i.imgur.com/rfSFOWK.png';
}

function updateMediaSession() {
    if ('mediaSession' in navigator) {
        navigator.mediaSession.metadata = new MediaMetadata({
            title: currentSurah.name,
            artist: currentRecitation.reciter,
            album: 'Qur\'an Sleep Radio',
        });
    }
}

helpButton.addEventListener('click', () => {
    modalOverlay.style.display = 'flex';
});

closeButton.addEventListener('click', () => {
    modalOverlay.style.display = 'none';
});

filterButton.addEventListener('click', () => {
    filterModalOverlay.style.display = 'flex';
});

filterCloseButton.addEventListener('click', () => {
    filterModalOverlay.style.display = 'none';
});

juzList.innerHTML = Array.from({ length: 30 }, (_, i) => {
    const juzNumber = i + 1;
    return `<div class="juz-item" data-juz="${juzNumber}">Juz ${juzNumber}</div>`;
}).join('');

juzList.addEventListener('click', event => {
    if (event.target.classList.contains('juz-item')) {
        const selected = event.target;
        selectedJuz = parseInt(selected.getAttribute('data-juz'), 10);
        document.querySelectorAll('.juz-item').forEach(item => item.classList.remove('selected'));
        selected.classList.add('selected');
    }
});

resetFilterButton.addEventListener('click', () => {
    selectedJuz = null;
    document.querySelectorAll('.juz-item').forEach(item => item.classList.remove('selected'));
});

progressBar.addEventListener('click', event => {
    const clickX = event.offsetX;
    const width = progressBar.offsetWidth;
    const duration = audioPlayer.duration;
    audioPlayer.currentTime = (clickX / width) * duration;
});

audioPlayer.addEventListener('timeupdate', () => {
    const duration = audioPlayer.duration;
    const currentTime = audioPlayer.currentTime;
    const progressPercent = (currentTime / duration) * 100;
    progress.style.width = `${progressPercent}%`;
});

// Function to show Surah info and download button when audio starts playing
audioPlayer.addEventListener('play', function () {
    updateSurahInfo();
});

// Hide the info again when audio is paused or ended
audioPlayer.addEventListener('pause', function () {
    surahInfoContainer.style.display = 'none';
});

audioPlayer.addEventListener('ended', function () {
    surahInfoContainer.style.display = 'none';
});
</script>

</body>
</html>
