<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Qur'an Sleep Radio and Memorization</title>
<style>
/* Import Poppins font */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

/* Reset default margins and paddings */
body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #000;
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
}

/* Full-screen wipe overlay with dark, rich, golden-silver gradient and opacity */
#goldenWipe {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        120deg,
        rgba(139, 117, 0, 0.95),
        rgba(169, 142, 25, 0.95),
        rgba(200, 168, 55, 0.95),
        rgba(139, 117, 0, 0.95)
    );
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    animation: smoothWipeWithPause 4s ease-in-out forwards, darkGoldenShimmer 4s ease-in-out infinite;
    background-size: 400% 400%;
    box-shadow: 0 0 50px rgba(255, 215, 155, 0.5);
}

/* Slowed-down, luxurious wipe animation */
@keyframes smoothWipeWithPause {
    0% {
        transform: translateX(-100%);
    }
    50% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(100%);
    }
}

/* Shimmer effect for a rich, metallic gradient shift */
@keyframes darkGoldenShimmer {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Logo styling for dark luxurious animation */
#wipeLogo {
    width: 450px;
    height: auto;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
}

/* Page content fade-in */
#pageContent {
    opacity: 0;
    transition: opacity 2s ease-in-out;
}

/* Temporarily hide scrollbars during animation */
body.no-scroll {
    overflow: hidden;
}

/* Background container */
.background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, #000000, #000000 50%, #b49f5e 100%);
}

/* Rotating geometric pattern */
.pattern {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: url('https://i.imgur.com/rxD6yFb.png');
    background-size: 100px 100px;
    opacity: 0.05;
    animation: rotate 60s linear infinite;
}

/* Rotation animation */
@keyframes rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Corner images */
.corner {
    position: absolute;
    background-size: contain;
    background-repeat: no-repeat;
    width: 20vw;
    height: 20vw;
    max-width: 250px;
    max-height: 250px;
    z-index: 2;
    filter: grayscale(1) brightness(0.2);
}

/* Specific positions */
.top-left {
    top: 0;
    left: 0;
    background-image: url('https://i.imgur.com/8Fx9W9u.png');
}

.top-right {
    top: 0;
    right: 0;
    background-image: url('https://i.imgur.com/kBZivxG.png');
}

.bottom-left {
    bottom: 0;
    left: 0;
    background-image: url('https://i.imgur.com/V1z0fyO.png');
}

.bottom-right {
    bottom: 0;
    right: 0;
    background-image: url('https://i.imgur.com/YuU3nYm.png');
}

/* Responsive adjustments */
@media (max-width: 600px) {
    .corner {
        width: 35vw;
        height: 35vw;
    }
}

/* Radio Player Interface */
#radio {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    z-index: 3;
}

/* Sleep Timer Button */
.sleep-timer-container {
    text-align: center;
    margin-bottom: 20px;
}

#sleepTimerButton {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    position: relative;
}

#sleepTimerButton img {
    width: 400px;
    height: 80px;
    border-radius: 20px;
}

/* Main Controls */
.main-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
}

.control-button,
.play-button {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    margin: 0 10px;
    position: relative;
    transition: transform 0.2s;
}

.control-button img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
}

.play-button img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
}

.control-button:active,
.play-button:active,
#sleepTimerButton:active,
#helpButton:active,
#switchModeButton:active {
    transform: scale(0.95);
}

/* Help and Switch Mode Buttons Container */
.help-button-container {
    text-align: center;
    margin-top: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
}

#helpButton,
#switchModeButton {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    position: relative;
    margin: 0 10px;
}

#helpButton img,
#switchModeButton img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
}

/* Tooltip */
.tooltip {
    position: absolute;
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(180, 159, 94, 0.9);
    color: #fff;
    padding: 8px;
    border-radius: 10px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
    z-index: 4;
    font-size: 14px;
    text-align: center;
}

.control-button:hover .tooltip,
.play-button:hover .tooltip,
#sleepTimerButton:hover .tooltip,
#helpButton:hover .tooltip,
#switchModeButton:hover .tooltip {
    opacity: 1;
}

/* Shuffle Button Animation */
@keyframes rotateButton {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

/* Audio Player Styles */
#audioPlayer {
    display: none;
}

/* Custom progress bar */
.progress-bar {
    width: 80%;
    max-width: 600px;
    height: 10px;
    background-color: #333;
    border-radius: 5px;
    margin: 20px auto 0;
    overflow: hidden;
    cursor: pointer;
    position: relative;
}

/* Progress fill */
.progress {
    width: 0%;
    height: 100%;
    background-color: #b49f5e;
}

/* Modal Overlay */
.modal-overlay, .filter-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 10;
    display: none;
    align-items: center;
    justify-content: center;
}

/* Modal Content */
.modal-content, .filter-modal-content {
    background-color: #1a1a1a;
    color: #fff;
    padding: 20px;
    border-radius: 15px;
    max-width: 90%;
    max-height: 80%;
    overflow-y: auto;
    position: relative;
}

/* Close Button */
.close-button {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 30px;
    color: #fff;
    cursor: pointer;
}

/* Button Descriptions in Modal */
.modal-content img, .filter-modal-content img {
    width: 50px;
    height: 50px;
    vertical-align: middle;
    margin-right: 10px;
}

.modal-content h2, .filter-modal-content h2 {
    font-size: 24px;
    margin-top: 0;
    text-align: center;
}

.modal-content p, .filter-modal-content p {
    font-size: 18px;
    line-height: 1.5;
}

/* Scrollbar Styling */
.modal-content::-webkit-scrollbar, .filter-modal-content::-webkit-scrollbar {
    width: 8px;
}

.modal-content::-webkit-scrollbar-thumb, .filter-modal-content::-webkit-scrollbar-thumb {
    background-color: #b49f5e;
    border-radius: 5px;
}

/* Surah Info Styles */
#surahInfoContainer {
    display: none;
    text-align: center;
    margin-top: 20px;
}

.surah-info {
    margin-top: 10px;
    color: #fff;
    font-size: 20px;
    text-align: center;
}

.surah-info .surah-name {
    font-weight: bold;
}

.surah-info .reciter-name {
    font-style: italic;
}

.download-button {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
    margin-top: 10px;
}

.download-button img {
    width: 50px;
    height: 50px;
}

/* Juz List Styles */
.juz-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 20px;
}

.juz-item {
    background-color: #333;
    color: #fff;
    padding: 15px;
    margin: 10px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.2s;
    width: 80px;
    text-align: center;
}

.juz-item:hover {
    background-color: #b49f5e;
}

.juz-item.selected {
    background-color: #b49f5e;
}

/* Reset Filter Button */
.reset-filter-button {
    background-color: #b49f5e;
    color: #fff;
    padding: 10px 20px;
    margin: 20px auto 0;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 18px;
    display: block;
}

.reset-filter-button:hover {
    background-color: #a18f57;
}

/* Memorization Mode Styles */
#memorizationMode {
    display: none;
    position: relative;
    z-index: 3;
    text-align: center;
    color: #fff;
    padding: 20px;
    overflow-y: auto;
    max-height: 100vh;
}

/* Title using Almalik font */
@font-face {
    font-family: 'Almalik';
    src: url('fonts/Almalik.otf') format('opentype'),
         url('fonts/Almalik.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

h1 {
    font-family: 'Almalik', sans-serif;
    color: #4caf50;
    margin-top: 40px;
    font-size: 3em;
    letter-spacing: 0.1em;
    transition: color 0.4s ease;
}

h1:hover {
    color: #81c784;
}

/* Styling for the search bar */
#searchBar {
    margin-top: 20px;
    width: 80%;
    max-width: 600px;
    padding: 10px 45px 10px 15px;
    font-size: 1em;
    border: 2px solid #b49f5e;
    border-radius: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #b49f5e;
    outline: none;
    transition: background 0.3s ease;
    animation: goldPulse 4s infinite ease-in-out;
    background: url('https://i.imgur.com/PUZam8g.png') no-repeat right 15px center;
    background-size: 20px;
    font-family: 'Almalik', sans-serif;
    letter-spacing: 0.1em;
}

@keyframes goldPulse {
    0% {
        border-color: #b49f5e;
        box-shadow: 0 0 5px #b49f5e;
    }
    50% {
        border-color: #e6c365;
        box-shadow: 0 0 10px #e6c365;
    }
    100% {
        border-color: #b49f5e;
        box-shadow: 0 0 5px #b49f5e;
    }
}

#searchBar::placeholder {
    color: #b49f5e;
    animation: goldPulse 4s infinite ease-in-out;
    font-family: 'Almalik', sans-serif;
    letter-spacing: 0.1em;
}

#searchBar:focus {
    background: rgba(255, 255, 255, 0.2);
}

ul {
    list-style: none;
    padding: 0;
    width: 100%;
    max-width: 900px;
    margin: 20px auto;
    transition: transform 0.6s ease;
}

li {
    background: rgba(0, 0, 0, 0.8);
    margin: 15px 0;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    cursor: pointer;
    letter-spacing: 0.15em;
}

li:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
    background: rgba(255, 255, 255, 0.1);
}

.surah-name {
    flex-grow: 1;
    text-align: left;
    padding-right: 10px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 1.1em;
}

.three-dots {
    cursor: pointer;
    font-size: 1.5em;
    margin-left: 10px;
    color: #bbb;
    transition: color 0.3s ease;
}

.three-dots:hover {
    color: #fff;
}

.menu {
    display: none;
    position: absolute;
    background: rgba(0, 0, 0, 0.9);
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    color: #fff;
    text-align: center;
    z-index: 200;
}

.menu-slider {
    width: 150px;
    margin: 15px 0;
}

button {
    background: linear-gradient(45deg, #4caf50, #81c784);
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    color: #ffffff;
    font-size: 1.1em;
    font-weight: 700;
    letter-spacing: 0.15em;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.3s ease;
}

button:hover {
    background: linear-gradient(45deg, #81c784, #4caf50);
    transform: scale(1.05);
}

button:active {
    background: linear-gradient(45deg, #66bb6a, #43a047);
    transform: scale(0.95);
}

button.playing {
    background: #43a047;
}

/* Blue Button Style */
.blue-button {
    background: linear-gradient(45deg, #1e3c72, #2a5298);
}

.blue-button:hover {
    background: linear-gradient(45deg, #2a5298, #1e3c72);
}

.blue-button:active {
    background: linear-gradient(45deg, #16335b, #1e3c72);
}

/* Bottom Bar */
#bottomBar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 20px;
    background: linear-gradient(45deg, #181818, #282828);
    box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 800px;
    z-index: 100;
}

#bottomBar .track-info {
    flex-grow: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#bottomBar .track-info .title {
    font-weight: 700;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 1em;
}

#bottomBar .controls {
    display: flex;
    align-items: center;
    gap: 10px;
    flex: 0 0 auto;
}

#bottomBar .controls button {
    background: none;
    border: none;
    color: #fff;
    cursor: pointer;
    transition: color 0.3s ease;
}

#bottomBar .controls button img {
    width: 24px;
    height: 24px;
}

#bottomBar .controls button:hover {
    color: #4caf50;
}

/* Progress Bar inside the track-info */
#bottomBar .progress-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    padding-left: 50px;
    padding-right: -20px;
}

#bottomBar .progress-container input[type="range"] {
    width: 85%;
    background: transparent;
    cursor: pointer;
    -webkit-appearance: none;
    appearance: none;
}

#bottomBar .progress-container input[type="range"]::-webkit-slider-runnable-track {
    height: 6px;
    background: #666;
    border-radius: 3px;
}

#bottomBar .progress-container input[type="range"]::-webkit-slider-thumb {
    width: 12px;
    height: 12px;
    background: #4caf50;
    border-radius: 50%;
    -webkit-appearance: none;
    margin-top: -3px;
}

#bottomBar .progress-time {
    font-size: 0.8em;
    color: #fff;
    white-space: nowrap;
}

#currentTime {
    position: absolute;
    left: 0;
}

#duration {
    position: absolute;
    right: 0;
}

/* Filter Icons Section */
.filter-icons {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
    gap: 10px;
    flex-wrap: nowrap;
}

.filter-item {
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    text-align: center;
}

.filter-item img {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

.filter-item span {
    font-size: 14px;
    color: #fff;
}

.filter-item:hover {
    transform: scale(1.05);
    transition: transform 0.2s ease;
}

/* Repeat Menu Styles */
#repeatMenu {
    display: none;
    position: absolute;
    background: rgba(0, 0, 0, 0.9);
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    color: #fff;
    text-align: center;
    z-index: 200;
}

/* Mobile Styles */
@media (max-width: 800px) {
    body {
        font-size: 20px;
    }

    h1 {
        font-size: 2em;
        letter-spacing: 0.2em;
    }

    #searchBar {
        width: 90%;
        font-size: 1em;
        padding: 12px 18px;
    }

    ul {
        max-width: 100%;
    }

    li {
        flex-direction: column;
        align-items: flex-start;
        padding: 20px;
    }

    .surah-name {
        text-align: left;
        padding-right: 0;
        font-size: 1.2em;
        margin-bottom: 10px;
    }

    .three-dots {
        margin-left: 0;
        margin-top: 10px;
        align-self: flex-end;
        font-size: 1.8em;
    }

    #bottomBar {
        flex-direction: column;
        align-items: center;
        padding: 15px;
        bottom: 0;
    }

    #bottomBar .track-info {
        margin-bottom: 10px;
        width: 100%;
        text-align: center;
    }

    #bottomBar .track-info .title {
        font-size: 1.2em;
    }

    #bottomBar .controls {
        margin-bottom: 10px;
    }

    #bottomBar .controls button {
        font-size: 2em;
    }

    #bottomBar .progress-container {
        margin: 0;
        width: 100%;
    }

    #bottomBar .progress-container input[type="range"] {
        width: 100%;
    }

    #bottomBar .progress-time {
        font-size: 1em;
        right: -40px;
    }

    .menu {
        width: 90%;
        left: 50%;
        transform: translateX(-50%);
    }

    .menu p {
        font-size: 1.2em;
    }

    .menu-slider {
        width: 80%;
    }

    .add-button {
        font-size: 1em;
        padding: 8px 12px;
    }

    .close-modal {
        font-size: 1em;
        padding: 12px 18px;
    }

    button {
        font-size: 1.2em;
    }
}
</style>
</head>

<body>

<!-- Wipe animation overlay -->
<div id="goldenWipe">
    <img src="https://i.imgur.com/QwjOZSH.png" alt="Logo" id="wipeLogo">
</div>

<!-- Background layers -->
<div class="background">
    <div class="pattern"></div>

    <!-- Corner Patterns -->
    <div class="corner top-left"></div>
    <div class="corner top-right"></div>
    <div class="corner bottom-left"></div>
    <div class="corner bottom-right"></div>
</div>

<!-- Page Content -->
<div id="pageContent">

    <!-- Radio Mode -->
    <div id="radioMode">

        <!-- Radio Player Interface -->
        <div id="radio">
            <!-- Sleep Timer Button -->
            <div class="sleep-timer-container">
                <button id="sleepTimerButton" aria-label="Sleep Timer">
                    <img src="https://i.imgur.com/6jVJpH5.png" alt="Sleep Timer">
                    <div class="tooltip">Sleep Timer</div>
                </button>
            </div>

            <!-- Main Controls -->
            <div class="main-controls">
                <!-- Volume Control Button -->
                <button id="volumeButton" class="control-button" aria-label="Volume Control">
                    <img src="https://i.imgur.com/YHeXLfV.png" alt="Volume 100%">
                    <div class="tooltip">Volume Control</div>
                </button>
                <!-- Speed Control Button -->
                <button id="speedButton" class="control-button" aria-label="Speed Control">
                    <img src="https://i.imgur.com/wDDwzEi.png" alt="Speed 1x">
                    <div class="tooltip">Speed Control</div>
                </button>
                <!-- Play/Pause Button -->
                <button id="playPauseButton" class="play-button" aria-label="Play/Pause">
                    <img src="https://i.imgur.com/rfSFOWK.png" alt="Play Button">
                    <div class="tooltip">Play/Pause</div>
                </button>
                <!-- Filter Button -->
                <button id="filterButton" class="control-button" aria-label="Filter">
                    <img src="https://i.imgur.com/0xVbbOJ.png" alt="Filter Button">
                    <div class="tooltip">Filter</div>
                </button>
                <!-- Shuffle Button -->
                <button id="shuffleButton" class="control-button" aria-label="Shuffle">
                    <img src="https://i.imgur.com/4K1dnEH.png" alt="Shuffle Button">
                    <div class="tooltip">Shuffle</div>
                </button>
            </div>

            <!-- Help and Switch Mode Buttons -->
            <div class="help-button-container">
                <!-- Mode Switch Button -->
                <button id="switchModeButton" aria-label="Switch Mode">
                    <img src="https://i.imgur.com/FiKtOLw.png" alt="Switch Mode Button">
                    <div class="tooltip">Switch Mode</div>
                </button>
                <!-- Help Button -->
                <button id="helpButton" aria-label="Help">
                    <img src="https://i.imgur.com/i9FtS2l.png" alt="Help Button">
                    <div class="tooltip">Help</div>
                </button>
            </div>

            <!-- Hidden audio player -->
            <audio id="audioPlayer"></audio>
            <!-- Custom progress bar -->
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>

            <!-- Surah Info -->
            <div id="surahInfoContainer" class="surah-info">
                <div class="surah-name" id="surahName">Surah Name</div>
                <div class="reciter-name" id="reciterName">Reciter Name</div>
                <button id="downloadButton" class="download-button" aria-label="Download">
                    <img src="https://i.imgur.com/V1Hw6TW.png" alt="Download Button">
                </button>
            </div>
        </div>

        <!-- Modal Overlay -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal-content">
                <button class="close-button" id="closeButton">&times;</button>
                <h2>Qur'an Sleep Radio</h2>
                <h2>‏اَلسَلامُ عَلَيْكُمْ وَرَحْمَةُ اَللهِ وَبَرَكاتُهُ</h2>
                <p>This page serves as an archive of my favourite recitations from around the world, all in one place.</p>
                <p>You can control the playback using the buttons below.</p>
                <h3>Controls:</h3>
                <p>
                    <img src="https://i.imgur.com/rfSFOWK.png" alt="Play/Pause Button"> <strong>Play/Pause:</strong> Start or pause the recitation.
                </p>
                <p>
                    <img src="https://i.imgur.com/YHeXLfV.png" alt="Volume Control Button"> <strong>Volume Control:</strong> Adjust the volume level.
                </p>
                <p>
                    <img src="https://i.imgur.com/wDDwzEi.png" alt="Speed Control Button"> <strong>Speed Control:</strong> Adjust the playback speed.
                </p>
                <p>
                    <img src="https://i.imgur.com/0xVbbOJ.png" alt="Filter Button"> <strong>Filter:</strong> Filter recitations by Juz.
                </p>
                <p>
                    <img src="https://i.imgur.com/4K1dnEH.png" alt="Shuffle Button"> <strong>Shuffle:</strong> Play a random Surah.
                </p>
                <p>
                    <img src="https://i.imgur.com/KbIweaS.png" alt="Sleep Timer Button"> <strong>Sleep Timer:</strong> Set how long to play for, and relax to the Word of Allah.
                </p>
            </div>
        </div>

        <!-- Filter Modal Overlay -->
        <div class="modal-overlay" id="filterModalOverlay">
            <div class="modal-content" id="filterModalContent">
                <button class="close-button" id="filterCloseButton">&times;</button>
                <h2>Filter by Juz</h2>
                <div class="juz-list" id="juzList">
                    <!-- Juz items will be dynamically added here -->
                </div>
                <button class="reset-filter-button" id="resetFilterButton">Reset Filter</button>
            </div>
        </div>

    </div>

    <!-- Memorization Mode -->
    <div id="memorizationMode">
        <!-- Title -->
        <h1>Qur'an Memorisation</h1>

        <!-- Search Bar -->
        <input type="text" id="searchBar" placeholder="Search Surah..." />

        <!-- Filter Icons -->
        <div class="filter-icons">
            <div class="filter-item" id="sortDefaultOrder">
                <img src="https://i.imgur.com/4g0zAcn.png" alt="Qur'anic Order Icon">
                <span>Qur'anic Order</span>
            </div>
            <div class="filter-item" id="sortRevelationOrder">
                <img src="https://i.imgur.com/pN1nyEg.png" alt="Revelation Order Icon">
                <span>Revelation Order</span>
            </div>
            <div class="filter-item" id="sortShortestToLongest">
                <img src="https://i.imgur.com/LsUPh5n.png" alt="Shortest to Longest Icon">
                <span>Shortest to Longest</span>
            </div>
            <div class="filter-item" id="sortLongestToShortest">
                <img src="https://i.imgur.com/lv82H0O.png" alt="Longest to Shortest Icon">
                <span>Longest to Shortest</span>
            </div>
            <div class="filter-item" id="juzButton">
                <img src="https://i.imgur.com/CKUpN9x.png" alt="Juz Icon">
                <span>Juz</span>
            </div>
            <div class="filter-item" id="createPlaylistButton">
                <img src="https://i.imgur.com/CKUpN9x.png" alt="Create Playlist Icon">
                <span>Create Playlist</span>
            </div>
        </div>

        <!-- Surah List -->
        <ul id="surahList"></ul>

        <!-- Juz List -->
        <div id="juzListContainer" class="juz-container" style="display: none;">
            <!-- Juz items will be dynamically added here -->
        </div>

        <!-- Playlist Display -->
        <div id="playlistDisplay" style="display: none;">
            <h2>Your Playlist</h2>
            <div id="playlistItems"></div>
            <button id="playPlaylistButton" class="blue-button">Play Playlist</button>
        </div>

        <!-- Bottom Bar -->
        <div id="bottomBar">
            <div class="track-info">
                <p id="bottomTrackTitle" class="title"></p>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <input type="range" id="progressBar" min="0" max="100" value="0">
                    <span class="progress-time" id="currentTime">00:00</span>
                    <span class="progress-time" id="duration">00:00</span>
                </div>
            </div>

            <!-- Control Buttons -->
            <div class="controls">
                <button id="memPlayPauseButton"><img src="https://i.imgur.com/HgqMt1K.png" alt="Play"></button>
                <button id="repeatButton"><img src="https://i.imgur.com/dXw6ybJ.png" alt="Repeat"></button>
            </div>
        </div>

        <!-- Repeat Menu -->
        <div id="repeatMenu" class="menu">
            <p>Repeat No.</p>
            <input type="range" id="repeatCountSlider" class="menu-slider" min="1" max="31" step="1" value="1">
            <span id="repeatCountValue">1</span> times
            <br>
            <button id="closeRepeatMenuButton">Close</button>
        </div>

        <!-- Playlist Modal -->
        <div id="playlistModal" style="display: none;">
            <div id="playlistModalContent">
                <h2>Choose Surahs to Add to the Playlist</h2>
                <ul id="playlistSurahList"></ul>
                <button class="close-modal" id="finishPlaylistButton">Finish</button>
            </div>
        </div>

    </div>

</div>

<!-- Include JS -->
<script>
// Ensure Surah information is hidden on page load
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById('surahInfoContainer').style.display = 'none';
    document.body.classList.add('no-scroll');
    setTimeout(function () {
        document.getElementById('goldenWipe').style.display = 'none';
        document.body.classList.remove('no-scroll');
        document.getElementById('pageContent').style.opacity = '1'; // Show page content
    }, 4000);
});

const audioPlayer = document.getElementById('audioPlayer');
const playPauseButton = document.getElementById('playPauseButton');
const shuffleButton = document.getElementById('shuffleButton');
const speedButton = document.getElementById('speedButton');
const volumeButton = document.getElementById('volumeButton');
const sleepTimerButton = document.getElementById('sleepTimerButton');
const helpButton = document.getElementById('helpButton');
const filterButton = document.getElementById('filterButton');
const progressBar = document.querySelector('.progress-bar');
const progress = document.getElementById('progress');
const modalOverlay = document.getElementById('modalOverlay');
const closeButton = document.getElementById('closeButton');
const filterModalOverlay = document.getElementById('filterModalOverlay');
const filterCloseButton = document.getElementById('filterCloseButton');
const surahNameDisplay = document.getElementById('surahName');
const reciterNameDisplay = document.getElementById('reciterName');
const downloadButton = document.getElementById('downloadButton');
const juzList = document.getElementById('juzList');
const resetFilterButton = document.getElementById('resetFilterButton');
const switchModeButton = document.getElementById('switchModeButton');

// AUDIO
const surahs = {
    'surah_001': {
        name: 'Al-Fatihah',
        recitations: [
            {
                reciter: 'Mishary Rashid Alafasy',
                files: ['assets/001.mp3']
            }
        ],
        juz: [1]
    }
};

// Variables for Surah info and download button
const surahInfoContainer = document.getElementById('surahInfoContainer');

let currentSurahKey = null;
let currentSurah = null;
let currentRecitation = null;
let currentPart = 0;
let isPlaying = false;

// Sleep Timer settings
const sleepTimes = [
    { time: null, img: 'https://i.imgur.com/6jVJpH5.png', alt: 'Sleep Timer' },
    { time: 10 * 60, img: 'https://i.imgur.com/2i3xjzP.png', alt: 'Sleep Timer: 10 Minutes' },
    { time: 15 * 60, img: 'https://i.imgur.com/8C92a9F.png', alt: 'Sleep Timer: 15 Minutes' },
    { time: 20 * 60, img: 'https://i.imgur.com/ZkhlFd4.png', alt: 'Sleep Timer: 20 Minutes' },
    { time: 30 * 60, img: 'https://i.imgur.com/dlYk6kr.png', alt: 'Sleep Timer: 30 Minutes' },
    { time: 60 * 60, img: 'https://i.imgur.com/T8qc0tX.png', alt: 'Sleep Timer: 1 Hour' },
    { time: 120 * 60, img: 'https://i.imgur.com/mj64RF8.png', alt: 'Sleep Timer: 2 Hours' }
];
let currentSleepIndex = 0;
let sleepTimerTimeout = null;

// Speed settings
const speeds = [
    { rate: 1.0, img: 'https://i.imgur.com/wDDwzEi.png', alt: 'Speed 1x' },
    { rate: 1.25, img: 'https://i.imgur.com/56ibCLP.png', alt: 'Speed 1.25x' },
    { rate: 1.5, img: 'https://i.imgur.com/QrgfxD1.png', alt: 'Speed 1.5x' },
    { rate: 1.75, img: 'https://i.imgur.com/AJUMmXp.png', alt: 'Speed 1.75x' },
    { rate: 2.0, img: 'https://i.imgur.com/PzKnwfo.png', alt: 'Speed 2x' },
    { rate: 0.5, img: 'https://i.imgur.com/rQqbvso.png', alt: 'Speed 0.5x' },
    { rate: 0.75, img: 'https://i.imgur.com/JymFl6p.png', alt: 'Speed 0.75x' }
];
let currentSpeedIndex = 0;

// Volume settings
const volumes = [
    { level: 1.0, img: 'https://i.imgur.com/YHeXLfV.png', alt: 'Volume 100%' },
    { level: 0.33, img: 'https://i.imgur.com/7tPoTem.png', alt: 'Volume 33%' },
    { level: 0.67, img: 'https://i.imgur.com/3eYgm5a.png', alt: 'Volume 67%' }
];
let currentVolumeIndex = 0;

// Filter settings
let selectedJuz = null;

audioPlayer.volume = volumes[currentVolumeIndex].level;
audioPlayer.playbackRate = speeds[currentSpeedIndex].rate;

function playSurah(surahKey) {
    currentSurahKey = surahKey;
    currentSurah = surahs[surahKey];
    const recitations = currentSurah.recitations || [{ reciter: currentSurah.reciter, files: currentSurah.files }];
    currentRecitation = recitations[Math.floor(Math.random() * recitations.length)];
    currentPart = 0;
    updateSurahInfo();
    playCurrentPart();
}

function playCurrentPart() {
    if (currentPart < currentRecitation.files.length) {
        audioPlayer.src = currentRecitation.files[currentPart];
        audioPlayer.playbackRate = speeds[currentSpeedIndex].rate;
        audioPlayer.volume = volumes[currentVolumeIndex].level;
        audioPlayer.play();
        isPlaying = true;
        updatePlayPauseIcon();
        updateMediaSession();
    }
}

audioPlayer.addEventListener('ended', () => {
    currentPart++;
    if (currentPart < currentRecitation.files.length) {
        playCurrentPart();
    } else {
        if (isPlaying) {
            playRandomSurah();
        }
    }
});

playPauseButton.addEventListener('click', () => {
    if (!isPlaying) {
        if (!currentSurah) {
            playRandomSurah();
        } else {
            audioPlayer.play();
            isPlaying = true;
            updatePlayPauseIcon();
            updateMediaSession();
        }
        startSleepTimer();
    } else {
        audioPlayer.pause();
        isPlaying = false;
        updatePlayPauseIcon();
        clearSleepTimer();
    }
});

shuffleButton.addEventListener('click', () => {
    shuffleButton.style.animation = 'rotateButton 0.5s';
    shuffleButton.addEventListener('animationend', () => {
        shuffleButton.style.animation = '';
    });
    playRandomSurah();
    isPlaying = true;
    updatePlayPauseIcon();
    startSleepTimer();
});

function playRandomSurah() {
    let keys = Object.keys(surahs);
    if (selectedJuz) {
        keys = keys.filter(key => surahs[key].juz.includes(selectedJuz));
    }
    if (keys.length > 0) {
        const randomSurahKey = keys[Math.floor(Math.random() * keys.length)];
        playSurah(randomSurahKey);
    } else {
        alert('No Surahs available for the selected Juz.');
    }
}

speedButton.addEventListener('click', () => {
    currentSpeedIndex = (currentSpeedIndex + 1) % speeds.length;
    audioPlayer.playbackRate = speeds[currentSpeedIndex].rate;
    const speedIcon = speedButton.querySelector('img');
    speedIcon.src = speeds[currentSpeedIndex].img;
    speedIcon.alt = speeds[currentSpeedIndex].alt;
});

volumeButton.addEventListener('click', () => {
    currentVolumeIndex = (currentVolumeIndex + 1) % volumes.length;
    audioPlayer.volume = volumes[currentVolumeIndex].level;
    const volumeIcon = volumeButton.querySelector('img');
    volumeIcon.src = volumes[currentVolumeIndex].img;
    volumeIcon.alt = volumes[currentVolumeIndex].alt;
});

sleepTimerButton.addEventListener('click', () => {
    currentSleepIndex = (currentSleepIndex + 1) % sleepTimes.length;
    const sleepIcon = sleepTimerButton.querySelector('img');
    sleepIcon.src = sleepTimes[currentSleepIndex].img;
    sleepIcon.alt = sleepTimes[currentSleepIndex].alt;
    if (isPlaying) {
        startSleepTimer();
    }
});

function startSleepTimer() {
    clearSleepTimer();
    const sleepTime = sleepTimes[currentSleepIndex].time;
    if (sleepTime !== null) {
        const fadeOutTime = 10;
        const stopTime = sleepTime - fadeOutTime;

        sleepTimerTimeout = setTimeout(() => {
            let fadeInterval = setInterval(() => {
                if (audioPlayer.volume > 0.01) {
                    audioPlayer.volume -= 0.01;
                } else {
                    clearInterval(fadeInterval);
                    audioPlayer.pause();
                    isPlaying = false;
                    updatePlayPauseIcon();
                    audioPlayer.volume = volumes[currentVolumeIndex].level;
                }
            }, 1000 * fadeOutTime / 100);
        }, 1000 * stopTime);
    }
}

function clearSleepTimer() {
    if (sleepTimerTimeout) {
        clearTimeout(sleepTimerTimeout);
        sleepTimerTimeout = null;
    }
}

function updateSurahInfo() {
    surahNameDisplay.textContent = currentSurah.name;
    reciterNameDisplay.textContent = currentRecitation.reciter;
    surahInfoContainer.style.display = 'block'; // Ensure the container is shown
}

function updatePlayPauseIcon() {
    const icon = playPauseButton.querySelector('img');
    icon.src = isPlaying ? 'https://i.imgur.com/iAyh3qN.png' : 'https://i.imgur.com/rfSFOWK.png';
}

function updateMediaSession() {
    if ('mediaSession' in navigator) {
        navigator.mediaSession.metadata = new MediaMetadata({
            title: currentSurah.name,
            artist: currentRecitation.reciter,
            album: 'Qur\'an Sleep Radio',
        });
    }
}

helpButton.addEventListener('click', () => {
    modalOverlay.style.display = 'flex';
});

closeButton.addEventListener('click', () => {
    modalOverlay.style.display = 'none';
});

filterButton.addEventListener('click', () => {
    filterModalOverlay.style.display = 'flex';
});

filterCloseButton.addEventListener('click', () => {
    filterModalOverlay.style.display = 'none';
});

juzList.innerHTML = Array.from({ length: 30 }, (_, i) => {
    const juzNumber = i + 1;
    return `<div class="juz-item" data-juz="${juzNumber}">Juz ${juzNumber}</div>`;
}).join('');

juzList.addEventListener('click', event => {
    if (event.target.classList.contains('juz-item')) {
        const selected = event.target;
        selectedJuz = parseInt(selected.getAttribute('data-juz'), 10);
        document.querySelectorAll('.juz-item').forEach(item => item.classList.remove('selected'));
        selected.classList.add('selected');
    }
});

resetFilterButton.addEventListener('click', () => {
    selectedJuz = null;
    document.querySelectorAll('.juz-item').forEach(item => item.classList.remove('selected'));
});

progressBar.addEventListener('click', event => {
    const clickX = event.offsetX;
    const width = progressBar.offsetWidth;
    const duration = audioPlayer.duration;
    audioPlayer.currentTime = (clickX / width) * duration;
});

audioPlayer.addEventListener('timeupdate', () => {
    const duration = audioPlayer.duration;
    const currentTime = audioPlayer.currentTime;
    const progressPercent = (currentTime / duration) * 100;
    progress.style.width = `${progressPercent}%`;
});

// Function to show Surah info and download button when audio starts playing
audioPlayer.addEventListener('play', function () {
    updateSurahInfo();
});

// Hide the info again when audio is paused or ended
audioPlayer.addEventListener('pause', function () {
    surahInfoContainer.style.display = 'none';
});

audioPlayer.addEventListener('ended', function () {
    surahInfoContainer.style.display = 'none';
});

// Switch Mode Button Functionality
switchModeButton.addEventListener('click', () => {
    const radioMode = document.getElementById('radioMode');
    const memorizationMode = document.getElementById('memorizationMode');
    if (radioMode.style.display !== 'none') {
        radioMode.style.display = 'none';
        memorizationMode.style.display = 'block';
    } else {
        memorizationMode.style.display = 'none';
        radioMode.style.display = 'block';
    }
});

/* Memorization Mode JavaScript */
// Initialize variables
const surahListData = [
    { number: 1, name: "Al-Fatihah", length: 52, revelationOrder: 5 },
    { number: 2, name: "Al-Baqarah", length: 7560, revelationOrder: 87 },
    { number: 3, name: "Aal-E-Imran", length: 4725, revelationOrder: 89 },
    // Add more surahs here...
];

const surahUl = document.getElementById('surahList');
const searchBar = document.getElementById('searchBar');
const memPlayPauseButton = document.getElementById('memPlayPauseButton');
const bottomTrackTitle = document.getElementById('bottomTrackTitle');
const memProgressBar = document.getElementById('progressBar');
const memCurrentTime = document.getElementById('currentTime');
const memDuration = document.getElementById('duration');
const repeatButton = document.getElementById('repeatButton');
const repeatMenu = document.getElementById('repeatMenu');
const repeatCountSlider = document.getElementById('repeatCountSlider');
const repeatCountValue = document.getElementById('repeatCountValue');
const closeRepeatMenuButton = document.getElementById('closeRepeatMenuButton');
const playlistModal = document.getElementById('playlistModal');
const createPlaylistButton = document.getElementById('createPlaylistButton');
const playlistSurahList = document.getElementById('playlistSurahList');
const finishPlaylistButton = document.getElementById('finishPlaylistButton');
const playlistDisplay = document.getElementById('playlistDisplay');
const playlistItems = document.getElementById('playlistItems');
const playPlaylistButton = document.getElementById('playPlaylistButton');

let memAudioPlayer = new Audio();
let currentMemSurahIndex = -1;
let playCount = 1;
let currentPlayCount = 1;
let repeatCount = 1;
let currentRepeatCount = 1;
let memIsPlaying = false;

// Playlist variables
let playlist = [];
let currentPlaylistIndex = 0;
let isPlaylistPlaying = false;

// Populate the surah list
function populateSurahList(list = surahListData) {
    surahUl.style.display = 'block';
    surahUl.innerHTML = ''; // Clear existing list
    list.forEach((surah) => {
        const li = createSurahListItem(surah);
        surahUl.appendChild(li);
    });
}

// Create Surah List Item
function createSurahListItem(surah) {
    const li = document.createElement('li');
    li.innerHTML = `<span class="surah-name">${surah.number}. ${surah.name} (${formatTime(surah.length)})</span><span class="three-dots">&#x22EE;</span>`;
    li.addEventListener('click', () => {
        currentMemSurahIndex = surahListData.findIndex(s => s.number === surah.number);
        currentPlayCount = playCount; // Reset play count
        currentRepeatCount = repeatCount; // Reset repeat count
        isPlaylistPlaying = false; // Not playing from playlist
        playMemSurah();
    });

    const menu = document.getElementById('menuTemplate') ? document.getElementById('menuTemplate').cloneNode(true) : document.createElement('div');
    menu.id = `menu-${surah.number}`;
    menu.classList.add('menu');
    menu.querySelector('#menuSurahName').textContent = surah.name;
    const playCountSlider = menu.querySelector('#surahPlayCount');
    const playCountValue = menu.querySelector('#surahPlayCountValue');

    playCountSlider.max = 31; // Set max to 31 (30 + infinite)
    playCountSlider.addEventListener('input', function () {
        playCount = parseInt(this.value);
        if (playCount == 31) {
            playCountValue.textContent = 'infinite';
        } else {
            playCountValue.textContent = playCount;
        }
    });
    menu.querySelector('#closeMenuButton').addEventListener('click', () => {
        menu.style.display = 'none';
    });

    li.querySelector('.three-dots').addEventListener('click', (event) => {
        event.stopPropagation();
        const rect = li.getBoundingClientRect();
        menu.style.display = 'block';
        menu.style.top = `${rect.bottom + window.scrollY}px`;
        menu.style.left = `${rect.left + window.scrollX}px`;
    });

    document.body.appendChild(menu);
    return li;
}

function formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const remainingSeconds = Math.floor(seconds % 60);
    return `${hours > 0 ? String(hours).padStart(2, '0') + ':' : ''}${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
}

function playMemSurah() {
    if (currentMemSurahIndex >= 0 && currentMemSurahIndex < surahListData.length) {
        const surahNumber = surahListData[currentMemSurahIndex].number;
        memAudioPlayer.src = `assets/${String(surahNumber).padStart(3, '0')}.mp3`;
        memAudioPlayer.play();
        bottomTrackTitle.textContent = surahListData[currentMemSurahIndex].name;
        memPlayPauseButton.innerHTML = `<img src="https://i.imgur.com/HGkqCfa.png" alt="Pause">`; // Pause icon
        memIsPlaying = true;
    }
}

memPlayPauseButton.addEventListener('click', () => {
    if (memAudioPlayer.paused) {
        memAudioPlayer.play();
        memIsPlaying = true;
        memPlayPauseButton.innerHTML = `<img src="https://i.imgur.com/HGkqCfa.png" alt="Pause">`; // Pause icon
    } else {
        memAudioPlayer.pause();
        memIsPlaying = false;
        memPlayPauseButton.innerHTML = `<img src="https://i.imgur.com/HgqMt1K.png" alt="Play">`; // Play icon
    }
});

memAudioPlayer.addEventListener('ended', () => {
    if (playCount === 31 || currentPlayCount < playCount) {
        currentPlayCount++;
        memAudioPlayer.currentTime = 0;
        memAudioPlayer.play();
    } else if (repeatCount === 31 || currentRepeatCount < repeatCount) {
        currentRepeatCount++;
        currentPlayCount = 1;
        memAudioPlayer.currentTime = 0;
        memAudioPlayer.play();
    } else if (isPlaylistPlaying) {
        currentPlaylistIndex++;
        currentPlayCount = 1;
        currentRepeatCount = 1;
        playPlaylistSurah();
    } else {
        memPlayPauseButton.innerHTML = `<img src="https://i.imgur.com/HgqMt1K.png" alt="Play">`; // Play icon
        memIsPlaying = false;
    }
});

memAudioPlayer.addEventListener('timeupdate', () => {
    if (memAudioPlayer.duration) {
        memProgressBar.value = (memAudioPlayer.currentTime / memAudioPlayer.duration) * 100;
        memCurrentTime.textContent = formatTime(memAudioPlayer.currentTime);
        memDuration.textContent = formatTime(memAudioPlayer.duration);
    }
});

memProgressBar.addEventListener('input', (e) => {
    if (memAudioPlayer.duration) {
        memAudioPlayer.currentTime = (e.target.value / 100) * memAudioPlayer.duration;
    }
});

// Repeat Button Functionality
repeatButton.addEventListener('click', () => {
    if (repeatMenu.style.display === 'block') {
        repeatMenu.style.display = 'none';
    } else {
        const rect = repeatButton.getBoundingClientRect();
        repeatMenu.style.display = 'block';
        repeatMenu.style.top = `${rect.top + window.scrollY - repeatMenu.offsetHeight}px`;
        repeatMenu.style.left = `${rect.left + window.scrollX - repeatMenu.offsetWidth / 2 + repeatButton.offsetWidth / 2}px`;
    }

    // Update the repeat button image
    repeatButton.innerHTML = `<img src="https://i.imgur.com/dXw6ybJ.png" alt="Repeat">`;
});

repeatCountSlider.addEventListener('input', function () {
    repeatCount = parseInt(this.value);
    if (repeatCount === 31) {
        repeatCountValue.textContent = 'infinite';
    } else {
        repeatCountValue.textContent = repeatCount;
    }
});

closeRepeatMenuButton.addEventListener('click', () => {
    repeatMenu.style.display = 'none';
});

// Playlist Feature
createPlaylistButton.addEventListener('click', () => {
    openPlaylistModal();
});

function openPlaylistModal() {
    playlistModal.style.display = 'block';
    playlistSurahList.innerHTML = '';

    surahListData.forEach(surah => {
        const li = document.createElement('li');
        li.innerHTML = `<span>${surah.number}. ${surah.name}</span>`;
        const input = document.createElement('input');
        input.type = 'number';
        input.min = '1';
        input.value = '1';
        input.style.width = '50px';
        input.style.marginRight = '10px';

        const addButton = document.createElement('button');
        addButton.textContent = 'Add';
        addButton.className = 'add-button';
        addButton.addEventListener('click', () => {
            let count = parseInt(input.value);
            if (!isNaN(count) && count > 0) {
                for (let i = 0; i < count; i++) {
                    playlist.push(surah);
                }
                alert(`${surah.name} added ${count} times to the playlist.`);
            } else {
                alert("Invalid number.");
            }
        });
        li.appendChild(input);
        li.appendChild(addButton);
        playlistSurahList.appendChild(li);
    });
}

finishPlaylistButton.addEventListener('click', () => {
    playlistModal.style.display = 'none';
    displayPlaylist();
});

function displayPlaylist() {
    playlistItems.innerHTML = '';
    if (playlist.length > 0) {
        playlistDisplay.style.display = 'block';
        playlist.forEach((surah, index) => {
            const div = document.createElement('div');
            div.className = 'playlist-item';
            div.textContent = `${index + 1}. ${surah.name}`;
            playlistItems.appendChild(div);
        });
    } else {
        playlistDisplay.style.display = 'none';
    }
}

playPlaylistButton.addEventListener('click', () => {
    if (playlist.length > 0) {
        currentPlaylistIndex = 0;
        isPlaylistPlaying = true;
        playPlaylistSurah();
    }
});

function playPlaylistSurah() {
    if (currentPlaylistIndex < playlist.length) {
        const surah = playlist[currentPlaylistIndex];
        currentMemSurahIndex = surahListData.findIndex(s => s.number === surah.number);
        memAudioPlayer.src = `assets/${String(surah.number).padStart(3, '0')}.mp3`;
        memAudioPlayer.play();
        bottomTrackTitle.textContent = surah.name;
        memPlayPauseButton.innerHTML = `<img src="https://i.imgur.com/HGkqCfa.png" alt="Pause">`; // Pause icon
        memIsPlaying = true;
    } else {
        isPlaylistPlaying = false;
        memIsPlaying = false;
    }
}

// Search functionality
searchBar.addEventListener('input', function () {
    const query = this.value.toLowerCase();
    const filteredSurahs = surahListData.filter(surah => surah.name.toLowerCase().includes(query));
    populateSurahList(filteredSurahs);
});

// Sorting Functions
document.getElementById('sortDefaultOrder').addEventListener('click', () => {
    surahListData.sort((a, b) => a.number - b.number);
    populateSurahList();
});

document.getElementById('sortShortestToLongest').addEventListener('click', () => {
    surahListData.sort((a, b) => a.length - b.length);
    populateSurahList();
});

document.getElementById('sortLongestToShortest').addEventListener('click', () => {
    surahListData.sort((a, b) => b.length - a.length);
    populateSurahList();
});

document.getElementById('sortRevelationOrder').addEventListener('click', () => {
    surahListData.sort((a, b) => a.revelationOrder - b.revelationOrder);
    populateSurahList();
});

// Initialize Surah List
populateSurahList();

</script>

</body>
</html>
